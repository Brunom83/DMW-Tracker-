<!DOCTYPE html>
<html lang="pt" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DMW Farm Tracker</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
</head>
<body class="custom-scrollbar">
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="digimon-loader">
                <div class="digi-egg"></div>
                <div class="loading-text">Carregando DMW Tracker...</div>
            </div>
        </div>
    </div>

    <!-- Header Moderno -->
    <nav class="navbar navbar-expand-lg navbar-dark custom-navbar fixed-top">
        <div class="container">
            <a class="navbar-brand brand-logo" href="#">
                <i class="fas fa-dragon me-2"></i>
                DMW Farm Tracker
                <span class="version-badge">v2.0</span>
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="switchToTab('dashboard')">
                            <i class="fas fa-chart-line me-1"></i>Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="switchToTab('moedas')">
                            <i class="fas fa-coins me-1"></i>Moedas
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="switchToTab('tours')">
                            <i class="fas fa-route me-1"></i>Tours
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="switchToTab('dungeons')">
                            <i class="fas fa-dungeon me-1"></i>Dungeons
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid main-container">
        <div class="row">
            <!-- Sidebar para Desktop -->
            <div class="col-lg-2 col-xl-2 d-none d-lg-block sidebar">
                <div class="sidebar-sticky">
                    <div class="sidebar-header">
                        <h5>Navega√ß√£o R√°pida</h5>
                    </div>
                    <div class="sidebar-menu">
                        <a href="#" class="sidebar-item" onclick="switchToTab('dashboard')">
                            <i class="fas fa-chart-line"></i>
                            <span>Dashboard</span>
                        </a>
                        <a href="#" class="sidebar-item" onclick="switchToTab('moedas')">
                            <i class="fas fa-coins"></i>
                            <span>Controlo Moedas</span>
                        </a>
                        <a href="#" class="sidebar-item" onclick="switchToTab('tours')">
                            <i class="fas fa-route"></i>
                            <span>Sistema Tours</span>
                        </a>
                        <a href="#" class="sidebar-item" onclick="switchToTab('dungeons')">
                            <i class="fas fa-dungeon"></i>
                            <span>Dungeons</span>
                        </a>
                    </div>
                    
                    <div class="sidebar-footer">
                        <div class="user-stats">
                            <div class="stat-item">
                                <small>Sess√µes Hoje:</small>
                                <strong id="sidebarSessoes">0</strong>
                            </div>
                            <div class="stat-item">
                                <small>Tera Ganho:</small>
                                <strong id="sidebarTera">0T</strong>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Conte√∫do Principal -->
            <div class="col-12 col-lg-10 col-xl-10 main-content">
                <div class="tab-content" id="mainTabsContent">
                    
                    <!-- ABA DASHBOARD -->
                    <div class="tab-pane fade show active" id="dashboard" role="tabpanel">
                        <div class="dashboard-header">
                            <h1>üìä Dashboard</h1>
                            <p class="text-muted">Vis√£o geral do teu progresso no DMW</p>
                        </div>

                        <div class="row g-3">
                            <!-- Stats Cards -->
                            <div class="col-xl-3 col-md-6">
                                <div class="stat-card income-card">
                                    <div class="stat-icon">
                                        <i class="fas fa-coins"></i>
                                    </div>
                                    <div class="stat-info">
                                        <h3 id="dashboardTera">0T</h3>
                                        <span>Ganho Total Hoje</span>
                                    </div>
                                    <div class="stat-trend up">
                                        <i class="fas fa-arrow-up"></i>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xl-3 col-md-6">
                                <div class="stat-card sessions-card">
                                    <div class="stat-icon">
                                        <i class="fas fa-play-circle"></i>
                                    </div>
                                    <div class="stat-info">
                                        <h3 id="dashboardSessoes">0</h3>
                                        <span>Sess√µes Hoje</span>
                                    </div>
                                    <div class="stat-trend up">
                                        <i class="fas fa-arrow-up"></i>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xl-3 col-md-6">
                                <div class="stat-card tours-card">
                                    <div class="stat-icon">
                                        <i class="fas fa-route"></i>
                                    </div>
                                    <div class="stat-info">
                                        <h3 id="dashboardTours">0</h3>
                                        <span>Tours Realizados</span>
                                    </div>
                                    <div class="stat-trend up">
                                        <i class="fas fa-arrow-up"></i>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xl-3 col-md-6">
                                <div class="stat-card efficiency-card">
                                    <div class="stat-icon">
                                        <i class="fas fa-tachometer-alt"></i>
                                    </div>
                                    <div class="stat-info">
                                        <h3 id="dashboardEficiencia">0%</h3>
                                        <span>Efici√™ncia</span>
                                    </div>
                                    <div class="stat-trend up">
                                        <i class="fas fa-arrow-up"></i>
                                    </div>
                                </div>
                            </div>

                            <!-- Pr√≥ximos Tours -->
                            <div class="col-xl-8">
                                <div class="card animated-card">
                                    <div class="card-header">
                                        <h5><i class="fas fa-clock me-2"></i>Pr√≥ximos Tours</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="proximosToursDashboard" class="tours-list">
                                            <div class="empty-state">
                                                <i class="fas fa-route"></i>
                                                <p>Configure os hor√°rios na aba Tours</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- A√ß√µes R√°pidas -->
                            <div class="col-xl-4">
                                <div class="card animated-card">
                                    <div class="card-header">
                                        <h5><i class="fas fa-bolt me-2"></i>A√ß√µes R√°pidas</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="quick-actions">
                                            <button class="quick-action-btn" onclick="switchToTab('moedas')">
                                                <i class="fas fa-plus-circle"></i>
                                                <span>Nova Sess√£o</span>
                                            </button>
                                            <button class="quick-action-btn" onclick="switchToTab('tours')">
                                                <i class="fas fa-route"></i>
                                                <span>Registrar Tour</span>
                                            </button>
                                            <button class="quick-action-btn" onclick="dmwTracker.limparDadosDia()">
                                                <i class="fas fa-broom"></i>
                                                <span>Limpar Dia</span>
                                            </button>
                                            <button class="quick-action-btn" onclick="dmwTracker.exportarDados()">
                                                <i class="fas fa-download"></i>
                                                <span>Exportar</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Hist√≥rico Recente -->
                            <div class="col-12">
                                <div class="card animated-card">
                                    <div class="card-header">
                                        <h5><i class="fas fa-history me-2"></i>Actividade Recente</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="dashboardAtividade" class="activity-feed">
                                            <div class="empty-state">
                                                <i class="fas fa-info-circle"></i>
                                                <p>Ainda n√£o h√° actividade hoje</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ABA MOEDAS (mant√©m o conte√∫do anterior mas com novas classes) -->
                    <div class="tab-pane fade" id="moedas" role="tabpanel">
                        <div class="dashboard-header">
                            <h1>üí∞ Controlo de Moedas</h1>
                            <p class="text-muted">Regista os teus ganhos e perdas</p>
                        </div>

                        <div class="row g-4">
                            <div class="col-12">
                                <div class="card animated-card">
                                    <div class="card-header">
                                        <h5><i class="fas fa-exchange-alt me-2"></i>Sess√£o de Farm</h5>
                                    </div>
                                    <div class="card-body">
                                        <!-- Mant√©m o conte√∫do das moedas com classes atualizadas -->
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="input-group-custom">
                                                    <label class="form-label">üü¢ ANTES da Sess√£o</label>
                                                    <div class="money-inputs">
                                                        <div class="money-field">
                                                            <i class="fas fa-gem"></i>
                                                            <input type="number" id="antesTera" class="form-control" placeholder="0.0" step="0.1">
                                                            <span class="currency">T</span>
                                                        </div>
                                                        <div class="money-field">
                                                            <i class="fas fa-coins"></i>
                                                            <input type="number" id="antesMega" class="form-control" placeholder="0">
                                                            <span class="currency">M</span>
                                                        </div>
                                                        <div class="money-field">
                                                            <i class="fas fa-circle"></i>
                                                            <input type="number" id="antesBits" class="form-control" placeholder="0">
                                                            <span class="currency">Bits</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-6">
                                                <div class="input-group-custom">
                                                    <label class="form-label">üîµ DEPOIS da Sess√£o</label>
                                                    <div class="money-inputs">
                                                        <div class="money-field">
                                                            <i class="fas fa-gem"></i>
                                                            <input type="number" id="depoisTera" class="form-control" placeholder="0.0" step="0.1">
                                                            <span class="currency">T</span>
                                                        </div>
                                                        <div class="money-field">
                                                            <i class="fas fa-coins"></i>
                                                            <input type="number" id="depoisMega" class="form-control" placeholder="0">
                                                            <span class="currency">M</span>
                                                        </div>
                                                        <div class="money-field">
                                                            <i class="fas fa-circle"></i>
                                                            <input type="number" id="depoisBits" class="form-control" placeholder="0">
                                                            <span class="currency">Bits</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="text-center mt-4">
                                            <button id="calcularBtn" class="btn btn-primary btn-lg calculate-btn">
                                                <i class="fas fa-calculator me-2"></i>
                                                Calcular Ganhos
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Resultados com novo design -->
                            <div class="col-12">
                                <div class="card animated-card">
                                    <div class="card-header">
                                        <h5><i class="fas fa-chart-bar me-2"></i>Resultados da Sess√£o</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="results-grid">
                                            <div class="result-item">
                                                <div class="result-label">Moedas Iniciais</div>
                                                <div class="result-value" id="resultadoAntes">0T 0M 0Bits</div>
                                            </div>
                                            <div class="result-item">
                                                <div class="result-label">Moedas Finais</div>
                                                <div class="result-value" id="resultadoDepois">0T 0M 0Bits</div>
                                            </div>
                                            <div class="result-item highlight">
                                                <div class="result-label">Ganhos Totais</div>
                                                <div class="result-value text-success" id="resultadoGanhos">+0T 0M 0Bits</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Calculadora de Eggs com novo design -->
                            <div class="col-12">
                                <div class="card animated-card">
                                    <div class="card-header">
                                        <h5><i class="fas fa-egg me-2"></i>Calculadora de Eggs</h5>
                                    </div>
                                    <div class="card-body">
                                        <!-- Mant√©m a funcionalidade com design melhorado -->
                                        <div class="egg-calculator">
                                            <div class="row g-3">
                                                <div class="col-md-5">
                                                    <label class="form-label">Tipo de Egg</label>
                                                    <select id="tipoEgg" class="form-select custom-select">
                                                        <option value="450">Class 7 Cracked DigiEgg (450 bits)</option>
                                                        <option value="300">Class 6 Cracked DigiEgg (300 bits)</option>
                                                        <option value="200">Class 4 Cracked DigiEgg (200 bits)</option>
                                                        <option value="150">Class 3 Cracked DigiEgg (150 bits)</option>
                                                        <option value="100">Class 2 Cracked DigiEgg (100 bits)</option>
                                                        <option value="25">Class 1 Cracked DigiEgg (25 bits)</option>
                                                        <option value="5000">Quest DigiEgg (5 Mega)</option>
                                                        <option value="125">Rank 1/Data DigiEgg (125 bits)</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-4">
                                                    <label class="form-label">Quantidade</label>
                                                    <input type="number" id="quantidadeEgg" class="form-control" value="0" min="0">
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label">&nbsp;</label>
                                                    <button id="adicionarEgg" class="btn btn-primary w-100 add-egg-btn">
                                                        <i class="fas fa-plus me-1"></i>Adicionar
                                                    </button>
                                                </div>
                                            </div>

                                            <div id="listaEggs" class="eggs-list mt-4">
                                                <div class="empty-state">
                                                    <i class="fas fa-egg"></i>
                                                    <p>Nenhum egg adicionado ainda...</p>
                                                </div>
                                            </div>

                                            <div class="egg-totals mt-4">
                                                <div class="row text-center g-3">
                                                    <div class="col-md-4">
                                                        <div class="total-card bits-total">
                                                            <i class="fas fa-circle"></i>
                                                            <div class="total-amount" id="totalBitsEggs">0</div>
                                                            <div class="total-label">Total em Bits</div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <div class="total-card mega-total">
                                                            <i class="fas fa-coins"></i>
                                                            <div class="total-amount" id="totalMegaEggs">0</div>
                                                            <div class="total-label">Total em Mega</div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <div class="total-card tera-total">
                                                            <i class="fas fa-gem"></i>
                                                            <div class="total-amount" id="totalTeraEggs">0</div>
                                                            <div class="total-label">Total em Tera</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="text-center mt-4">
                                                <button id="copiarParaDepois" class="btn btn-outline-primary">
                                                    <i class="fas fa-copy me-2"></i>
                                                    Copiar Total para 'DEPOIS'
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ABA TOURS (mant√©m funcionalidade com design melhorado) -->
                    <div class="tab-pane fade" id="tours" role="tabpanel">
                        <div class="dashboard-header">
                            <h1>üèπ Sistema de Tours</h1>
                            <p class="text-muted">Gerir hor√°rios e registar tours realizados</p>
                        </div>
                        
                        <!-- O conte√∫do dos tours mant√©m a mesma estrutura mas com novas classes -->
                        <!-- Usaremos as mesmas IDs mas com CSS melhorado -->
                    </div>

                    <!-- ABA DUNGEONS -->
                    <div class="tab-pane fade" id="dungeons" role="tabpanel">
                        <div class="dashboard-header">
                            <h1>üè∞ Dungeons</h1>
                            <p class="text-muted">Sistema de tracking de dungeons - Em breve!</p>
                        </div>
                        
                        <div class="row">
                            <div class="col-12">
                                <div class="card animated-card coming-soon-card">
                                    <div class="card-body text-center py-5">
                                        <i class="fas fa-dungeon coming-soon-icon"></i>
                                        <h3 class="mt-3">Em Desenvolvimento</h3>
                                        <p class="text-muted">Estamos a trabalhar no sistema de dungeons!</p>
                                        <div class="progress mt-4">
                                            <div class="progress-bar progress-bar-striped progress-bar-animated" style="width: 65%"></div>
                                        </div>
                                        <p class="small text-muted mt-2">65% completo</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="custom-footer">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="mb-0">&copy; 2024 DMW Farm Tracker. Feito com ‚ù§Ô∏è para a comunidade DMW.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <div class="footer-links">
                        <span id="onlineStatus" class="badge bg-success">
                            <i class="fas fa-circle me-1"></i>Online
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="js/app.js"></script>
</body>
</html>